---  
import BaseLayout from "../../layouts/BaseLayout.astro";
import { AppProviders } from "../../react-pages/AppProviders";
import ArticleDetailPage from "../../react-pages/ArticleDetailPage";
import NotFound from "../../react-pages/NotFound";
import articles from "../../data/articles.json";
import brands from "../../data/brands.json";
import ArticleRadarChart from "../../components/article/RadarChart";

export async function getStaticPaths() {
  const articles = (await import("../../data/articles.json")).default;
  return articles.map((article) => ({
    params: { slug: article.slug },
    props: { article },
  }));
}

const { slug } = Astro.params;
const article = articles.find((item) => item.slug === slug);
const brand = article ? brands.find((item) => item.id === article.brandId) : undefined;
const pageTitle = article
  ? `${article.title} | PetFood Expert`
  : "Art√≠culo no encontrado";
---

<BaseLayout title={pageTitle}>
  <AppProviders client:load client:idle>
    <ArticleDetailPage article={article} brand={brand} />
  </AppProviders>

  <!-- Radar chart fuera de React, como Astro Island -->
  <div class="container mt-6">
    <ArticleRadarChart scores={article.scores} client:load />
  </div>
</BaseLayout>
